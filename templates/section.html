{% extends "base.html" %}

{% block content %}
    <!-- Animated Background -->
    <div class="cyber-background">
        <div class="grid-lines"></div>
        <div class="floating-particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-badge">
                    <span class="badge-text">{{ section.extra.hero_kicker | default(value="Section") }}</span>
                </div>
                <h1 class="hero-title">
                    {{ section.extra.hero_title | default(value=section.title) }}
                    {% if section.extra.hero_title_gradient %}
                    <span class="gradient-text">{{ section.extra.hero_title_gradient }}</span>
                    {% endif %}
                </h1>
                <p class="hero-subtitle">
                    {{ section.extra.hero_subtitle | default(value=section.description) }}
                </p>
                <div class="hero-buttons">
                    {% if section.extra.primary_text and section.extra.primary_url %}
                    <a href="{{ section.extra.primary_url }}" class="btn btn-primary">
                        <span>{{ section.extra.primary_text }}</span>
                        <svg class="btn-icon" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                    </a>
                    {% endif %}
                    {% if section.extra.secondary_text and section.extra.secondary_url %}
                    <a href="{{ section.extra.secondary_url }}" class="btn btn-secondary">
                        <span>{{ section.extra.secondary_text }}</span>
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    <!-- Dynamic Content Section -->
    {% if section.title == "Features" %}
    <section class="applications content-section">
        <div class="container">
            <h2 class="section-title">Applications</h2>
        </div>
    {% else %}
    {% if section.title == "Roadmap" %}
    <section class="timeline-section content-section">
    {% else %}
    <section class="content-section">
    {% endif %}
        <div class="container">
            <div class="prose max-w-none">
                {{ section.content | safe }}
            </div>

            <!-- Sub-pages Grid -->
            {% if section.pages | length > 0 %}
            <div class="subpages-grid">
                {% for page in section.pages %}
                <article class="subpage-card">
                    <h2 class="subpage-title"><a href="{{ page.permalink }}">{{ page.title }}</a></h2>
                    {% if page.description %}<p class="subpage-description">{{ page.description }}</p>{% endif %}
                    {% if page.date %}
                    <div class="subpage-meta">
                        <time datetime="{{ page.date | date(format='%Y-%m-%d') }}">{{ page.date | date(format='%B %d, %Y') }}</time>
                    </div>
                    {% endif %}
                </article>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </section>
    {% endif %}

    <!-- CTA Section -->
    {% if section.extra.show_cta | default(value=true) %}
    <section class="cta">
        <div class="container">
            <div class="cta-content">
                <h2 class="cta-title">{{ section.extra.cta_title | default(value="Ready to get started?") }}</h2>
                <p class="cta-subtitle">{{ section.extra.cta_subtitle | default(value="Join forward-thinking organizations securing their digital future") }}</p>
                <div class="cta-buttons">
                    <a href="{{ section.extra.cta_primary_url | default(value="/access/") }}" class="btn btn-primary btn-large">
                        <span>{{ section.extra.cta_primary_text | default(value="Get Started Today") }}</span>
                        <svg class="btn-icon" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                    </a>
                    <a href="{{ section.extra.cta_secondary_url | default(value="/features/") }}" class="btn btn-secondary btn-large">{{ section.extra.cta_secondary_text | default(value="Learn More") }}</a>
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    {% if section.title == "Features" %}
    <script>
      (function(){
        try {
          var observer = new IntersectionObserver(function(entries){
            entries.forEach(function(entry){
              if (entry.isIntersecting) entry.target.classList.add('animate');
            });
          }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

          var targets = document.querySelectorAll('.module-card, .service-card, .feature-card, .app-section');
          targets.forEach(function(el){ observer.observe(el); });
        } catch (e) {
          var vis = document.querySelectorAll('.module-card, .service-card, .feature-card');
          vis.forEach(function(el){ el.classList.add('animate'); });
        }
      })();
    </script>
    {% elif section.title == "Roadmap" %}
    <script>
      (function(){
        try {
          var obs = new IntersectionObserver(function(entries){
            entries.forEach(function(entry){ if (entry.isIntersecting) entry.target.classList.add('animate'); });
          }, { threshold: 0.2, rootMargin: '0px 0px -100px 0px' });
          document.querySelectorAll('.timeline-item, .progress-card').forEach(function(el){ obs.observe(el); });
        } catch (e) {}
      })();
    </script>
    {% endif %}
{% endblock content %}

